class PostComments{constructor(t){this.postId=t,this.postContainer=$("#post-"+t),this.newCommentForm=$(`#post-${t}-comments-form`),this.createComment(t);let e=this;$(" .delete-comment-btn",this.postContainer).each((function(){e.deleteComment($(this))}))}createComment(t){let e=this;this.newCommentForm.submit((function(n){n.preventDefault();$.ajax({type:"post",url:"/comments/add-comment",data:$(this).serialize(),success:function(n){let o=e.newCommentDom(n.comment);console.log($("#post-comments-"+t)),$("#post-comments-"+t).prepend(o),e.deleteComment($(" .delete-comment-btn",o)),new Noty({theme:"relax",text:"Comment published!",type:"success",layout:"topRight",timeout:1500}).show()},error:function(t){console.log(t.responseText)}})}))}newCommentDom(t){return $(`<div id='comment-${t._id}' class="post-comment-item">\n        <div class="post-comment-header">\n          <span class="post-comment-author">${t.user.name}</span>\n          <span class="post-comment-time">a minute ago</span>\n          <div class="post-actions">\n            <button class="post-like no-btn">\n            <img\n              src="https://image.flaticon.com/icons/svg/1077/1077035.svg"\n              alt="likes-icon"\n            />\n              <span class="post-comment-likes"\n                >${t.likes.length} likes</span>\n            </button>\n          </div>\n          <button class="delete-btn no-btn">\n            <a\n              class="delete-comment-btn delete-post-btn"\n              href="/comments/delete-comment/${t._id}"\n              ><i class="fas fa-times"></i\n            ></a>\n          </button>\n        </div>\n      \n        <div class="post-comment-content">${t.content}</div>\n      </div>\n      `)}deleteComment(t){$(t).click((function(e){e.preventDefault(),$.ajax({type:"get",url:$(t).prop("href"),success:function(t){$("#comment-"+t.comment_id).remove(),new Noty({theme:"relax",text:"Comment Deleted",type:"success",layout:"topRight",timeout:1500}).show()},error:function(t){console.log(t.responseText)}})}))}}