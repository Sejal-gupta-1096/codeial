let createPost=function(){let e=$("#post-form");e.submit((function(){event.preventDefault(),$.ajax({type:"POST",url:"/posts/add-post",data:e.serialize(),success:function(e){console.log("data Posted",e.post);let t=newPostToBePrepended(e.post);console.log(t),console.log($(" .delete-post-btn",t)),deletePost($(" .delete-post-btn",t)),createComment(),toggleLike($(" .toggle-btn",t)),$("#posts-list").prepend(t),notifications("success",e.message)},error:function(e){console.log(e.responseText)}})}))},newPostToBePrepended=function(e){return $(`<li id="post-${e._id}">\n                <a class="delete-post-btn" href="/posts/delete-post/${e._id}"><i class="fas fa-window-close"></i></a>\n                ${e.content}\n                <small> ${e.user.name}</small>\n                <a data-likes="0" class="toggle-btn" href="/likes/toggle/?id=${e._id}&type=Posts">${e.likes.length} Likes</a>\n                <div class="posts-comments">\n                \n                        <form action="/comments/add-comment" method="POST">\n                        <input type="text" name="content" required>\n                        <input type="hidden" name="post" value="${e._id}">\n                        <input type="submit" value="Add Comment">\n                        </form>\n                \n                </div>\n                <div class="post-comments-list">\n                <ul>\n                </ul>\n\n                </div>\n            </li>`)},deletePost=function(e){console.log(e),$(e).click((function(t){console.log($(e).prop("href")),t.preventDefault(),$.ajax({type:"get",url:$(e).prop("href"),success:function(e){$("#post-"+e.post_id).remove(),notifications("success",e.message)},error:function(e){console.log(e.responseText)}})}))};$("#posts-list>li").each((function(){deletePost($(" .delete-post-btn",$(this)))}));let notifications=function(e,t){new Noty({theme:"relax",text:t,type:e,layout:"topRight",timeout:1e3}).show()};createPost();